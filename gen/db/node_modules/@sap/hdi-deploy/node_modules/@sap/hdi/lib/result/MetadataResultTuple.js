'use strict';

const ResultTuple = require('../ResultTuple');
const MetadataResult = require('./MetadataResult');

/**
 * An object of this class contains the usual ResultTuple attributes like return code, request ID and messages.
 * The results property is an array of {@link MetadataResult}s.
 * @extends ResultTuple
 */
class MetadataResultTuple extends ResultTuple {
  /**
   * Creates an instance of MetadataResultTuple.
   * @memberof MetadataResultTuple
   */
  constructor(){
    super();
  }

  /**
   * Fills the result property of the object with the supplied result set.
   * @param {Object[]} resultSet The result set of a procedure call.
   * @returns {undefined} Returns nothing/undefined.
   * @throws Throws an error, if the result set is not an array.
   */
  fillResultFromResultSet(resultSet) {
    if (resultSet instanceof Array) {
      resultSet.forEach((res) => {
        this.results.push(new MetadataResult(res));
      });
    } else {
      throw new Error('Result set should be an array.');
    }
  }
}

module.exports = MetadataResultTuple;