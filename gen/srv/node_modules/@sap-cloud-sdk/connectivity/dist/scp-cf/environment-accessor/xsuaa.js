"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getXsuaaServiceCredentials = void 0;
const service_credentials_1 = require("./service-credentials");
/**
 * @internal
 * Takes a decoded JWT and uses the client_id and audience claims to determine the XSUAA service instance
 * that issued the JWT. Returns the credentials if a match is found, otherwise throws an error.
 * If no decoded JWT is specified, then returns the first existing XSUAA credential service plan "application".
 * @param token - Either an encoded or decoded JWT.
 * @returns The credentials for a match, otherwise `null`.
 */
function getXsuaaServiceCredentials(token) {
    const credentials = (0, service_credentials_1.getServiceCredentials)('xsuaa', token);
    if (!credentials) {
        throw new Error('Could not find binding to the XSUAA service.');
    }
    return credentials;
}
exports.getXsuaaServiceCredentials = getXsuaaServiceCredentials;
//# sourceMappingURL=xsuaa.js.map