"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildHeadersForDestination = void 0;
const util_1 = require("@sap-cloud-sdk/util");
const authorization_header_1 = require("./authorization-header");
/**
 * Build a request header object, that contains authentication headers and SAP specific headers like 'sap-client', from a given destination.
 * @param destination - The given destination that contains e.g., authentication and SAP client information.
 * @returns A request header object, built from the given destination.
 */
async function buildHeadersForDestination(destination) {
    const authHeaders = await (0, authorization_header_1.buildAuthorizationHeaders)(destination);
    const sapHeaders = getSapHeaders(destination);
    return (0, util_1.mergeIgnoreCase)(destination.headers, {
        ...authHeaders,
        ...sapHeaders
    });
}
exports.buildHeadersForDestination = buildHeadersForDestination;
function getSapHeaders(destination) {
    const defaultHeaders = (0, util_1.pickNonNullish)({
        'sap-client': destination.sapClient,
        'SAP-Connectivity-SCC-Location_ID': destination.cloudConnectorLocationId
    });
    return (0, util_1.mergeLeftIgnoreCase)(defaultHeaders, destination.headers);
}
//# sourceMappingURL=header-builder-for-destination.js.map