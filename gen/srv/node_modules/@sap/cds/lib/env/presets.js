// REVISIT: Looks ver hard-coded -> move this to consumers?
module.exports = function (conf) {
  const { features } = conf
  if (!features) return

  // integrity checks
  if (typeof features.assert_integrity === 'string') {
    switch (features.assert_integrity) {
      case 'off':
        features.assert_integrity = false
        break
      case 'app':
        features.assert_integrity = true
        features.assert_integrity_type = 'RT'
        break
      case 'db':
        features.assert_integrity = true
        features.assert_integrity_type = 'DB'
        break
      default:
        // > invalid -> set to default
        features.assert_integrity = false
    }
  }

}
